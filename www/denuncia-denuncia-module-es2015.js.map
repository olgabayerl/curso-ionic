{"version":3,"sources":["./src/app/denuncia/denuncia.page.html","./src/app/denuncia/denuncia-routing.module.ts","./src/app/denuncia/denuncia.module.ts","./src/app/denuncia/denuncia.page.scss","./src/app/denuncia/denuncia.page.ts","./src/app/models/denuncia/denuncia.ts","./src/app/services/denuncia/denuncia.service.ts"],"names":[],"mappings":"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","file":"denuncia-denuncia-module-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-title>\\r\\n      Denúncia\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n  <ion-header collapse=\\\"condense\\\">\\r\\n    <ion-toolbar>\\r\\n      <ion-title size=\\\"large\\\">Denúncia</ion-title>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  <form [formGroup]=\\\"formDenuncia\\\" (ngSubmit)=\\\"cadastraDenuncia()\\\">\\r\\n  <ion-item lines=\\\"full\\\">\\r\\n    <div style=\\\"justify-content: space-between;\\\">\\r\\n      <ion-input placeholder=\\\"Informe seu nome\\\" type=\\\"text\\\" formControlName=\\\"nome\\\"></ion-input>\\r\\n      <div *ngIf=\\\"formDenuncia.controls.nome.errors\\\">\\r\\n        <span *ngIf=\\\"formDenuncia.controls.nome.errors.required\\\"><small>Campo obrigatório</small></span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-item lines=\\\"full\\\">\\r\\n    <div style=\\\"justify-content: space-between;\\\">\\r\\n      <ion-input placeholder=\\\"Informe seu e-mail\\\" type=\\\"text\\\" formControlName=\\\"email\\\"></ion-input>\\r\\n      <div *ngIf=\\\"formDenuncia.controls.email.errors\\\">\\r\\n        <span *ngIf=\\\"formDenuncia.controls.email.errors.required\\\"><small>Campo obrigatório</small></span>\\r\\n        <span *ngIf=\\\"formDenuncia.controls.email.errors.pattern\\\"><small>Formato inválido</small></span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <div style=\\\"justify-content: space-between;\\\">\\r\\n      <ion-input placeholder=\\\"Informe o endereço da ocorrência\\\" type=\\\"text\\\" formControlName=\\\"endereco\\\"></ion-input>\\r\\n      <div *ngIf=\\\"formDenuncia.controls.endereco.errors\\\">\\r\\n        <span *ngIf=\\\"formDenuncia.controls.endereco.errors.required\\\"><small>Campo obrigatório</small></span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <div style=\\\"justify-content: space-between;\\\">\\r\\n      <ion-datetime displayFormat=\\\"DD-MM-YYYY\\\" placeholder=\\\"Informe a data da ocorrência\\\" formControlName=\\\"data\\\"></ion-datetime>\\r\\n      <div *ngIf=\\\"formDenuncia.controls.data.errors\\\">\\r\\n        <span *ngIf=\\\"formDenuncia.controls.data.errors.required\\\"><small>Campo obrigatório</small></span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <div style=\\\"justify-content: space-between;\\\">\\r\\n    <ion-textarea placeholder=\\\"Descreva a denúncia\\\" type=\\\"text\\\" formControlName=\\\"descricao\\\"></ion-textarea>\\r\\n      <div *ngIf=\\\"formDenuncia.controls.descricao.errors\\\">\\r\\n        <span *ngIf=\\\"formDenuncia.controls.descricao.errors.required\\\"><small>Campo obrigatório</small></span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-button expand=\\\"block\\\" type=\\\"submit\\\" [disabled]=\\\"!formDenuncia.valid\\\">Enviar</ion-button>  \\r\\n  <ion-item>\\r\\n    <ion-label>Coordenadas: {{latitude}}, {{longitude}}</ion-label>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label>Endereço: {{endereco}}</ion-label>\\r\\n  </ion-item>\\r\\n  <ion-button expand=\\\"block\\\" (click)=\\\"recuperaCoordenadas()\\\">Obter Localização</ion-button>\\r\\n</form>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { denunciaPage } from './denuncia.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: denunciaPage,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class denunciaPageRoutingModule {}\r\n","import { IonicModule } from '@ionic/angular';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport {  ReactiveFormsModule } from '@angular/forms';\r\nimport { denunciaPage } from './denuncia.page';\r\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\r\n\r\nimport { denunciaPageRoutingModule } from './denuncia-routing.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    IonicModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    ExploreContainerComponentModule,\r\n    ReactiveFormsModule,\r\n    denunciaPageRoutingModule\r\n  ],\r\n  declarations: [denunciaPage]\r\n})\r\nexport class denunciaPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2RlbnVuY2lhL2RlbnVuY2lhLnBhZ2Uuc2NzcyJ9 */\";","import { Component,OnInit  } from '@angular/core';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { Denuncia } from '../models/denuncia/denuncia';\r\nimport { DenunciaService } from '../services/denuncia/denuncia.service';\r\nimport { StorageService } from '../services/storage/storage.service';\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\nimport { NativeGeocoder, NativeGeocoderResult, NativeGeocoderOptions } from '@ionic-native/native-geocoder/ngx';\r\n\r\n\r\n@Component({\r\n  selector: 'app-denuncia',\r\n  templateUrl: 'denuncia.page.html',\r\n  styleUrls: ['denuncia.page.scss']\r\n})\r\nexport class denunciaPage {\r\n\r\n  public formDenuncia: FormGroup;\r\n  latitude:any;\r\n  longitude:any;\r\n  endereco:String;\r\n\r\n\r\n  constructor(public alertController: AlertController, \r\n              private formBuilder: FormBuilder, \r\n              private denunciaService: DenunciaService, \r\n              private storageService: StorageService,\r\n              private geolocation: Geolocation,\r\n              private nativeGeocoder: NativeGeocoder) {\r\n    this.formDenuncia = this.formBuilder.group({\r\n      'nome': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'email': [null, Validators.compose([Validators.required,\r\n        Validators.pattern('^[_A-Za-z0-9-\\\\+]+(\\\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\\\.[A-Za-z0-9]+)*(\\\\.[A-Za-z]{2,})$')])],\r\n      'endereco': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'data': [null, Validators.compose([Validators.required])],\r\n      'descricao': [null, Validators.compose([Validators.required, Validators.minLength(3)])]\r\n    });\r\n  };\r\n\r\n  async mostraAlerta(titulo: string, mensagem: string) {\r\n    const alert = await this.alertController.create({\r\n      header: titulo,\r\n      message: mensagem,\r\n      buttons: ['OK']\r\n    });\r\n\r\n    await alert.present();\r\n  };\r\n  async cadastraDenuncia(){\r\n    let denuncia = new Denuncia();\r\n    denuncia.nome = this.formDenuncia.controls[\"nome\"].value;\r\n    denuncia.email = this.formDenuncia.controls[\"email\"].value;\r\n    denuncia.endereco = this.formDenuncia.controls[\"endereco\"].value;\r\n    denuncia.data = this.formDenuncia.controls[\"data\"].value;\r\n    denuncia.descricao = this.formDenuncia.controls[\"descricao\"].value;\r\n\r\n    this.denunciaService.insereDenuncia(denuncia).then(()=>{\r\n      this.mostraAlerta(\"Sucesso\", \"Cadastro efetuado!\");\r\n    }).catch((error)=>{\r\n      console.log(error);\r\n    })\r\n  };\r\n\r\n  async recuperaEnderecoStorage(){\r\n    const endereco = await this.storageService.recuperaStorage(\"endereco\");\r\n    this.formDenuncia.controls[\"endereco\"].setValue(endereco);\r\n    console.log(\"Endereço: \" +endereco );\r\n  };\r\n\r\n  async recuperaCoordenadas(){\r\n   \r\n    const position = await this.geolocation.getCurrentPosition({enableHighAccuracy: true, timeout: 5000, maximumAge: 0}).then((resp) => {\r\n        this.latitude = resp.coords.latitude;\r\n        this.longitude = resp.coords.longitude; \r\n        console.log(JSON.stringify(resp));\r\n      }).catch((error) => {\r\n        this.mostraAlerta('Erro ao obter as coordenadas!', error);\r\n        console.log('Erro ao obter as coordenadas!' + error);\r\n    });\r\n    await this.converteCoordenadas();\r\n  }\r\n  ionViewWillEnter(){\r\n    this.recuperaEnderecoStorage();\r\n  }\r\n\r\n  async converteCoordenadas(){\r\n    let options: NativeGeocoderOptions = {\r\n      useLocale: true,\r\n      maxResults: 5\r\n  };\r\n    \r\n  this.nativeGeocoder.reverseGeocode(this.latitude, this.longitude, options)\r\n    .then((result: NativeGeocoderResult[]) => {\r\n      this.endereco = JSON.stringify(result[0]);\r\n      console.log(this.endereco);\r\n    })\r\n    .catch((error: any) => console.log(error));\r\n  };\r\n\r\n}\r\n","export class Denuncia {\r\n    nome:string;\r\n    email:string;\r\n    endereco:string;\r\n    data:string;\r\n    descricao:string;\r\n}","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { Denuncia } from 'src/app/models/denuncia/denuncia';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DenunciaService {\r\n\r\n  constructor(private firestore: AngularFirestore) { }\r\n\r\n  collectionName = 'denuncias';\r\n\r\n  insereDenuncia(denuncia: Denuncia){\r\n    let denunciaRecord = {\r\n      nome : denuncia.nome,\r\n      email : denuncia.email,\r\n      endereco : denuncia.endereco,\r\n      data : denuncia.data,\r\n      descricao : denuncia.descricao,\r\n      timestamp: new Date()\r\n    }\r\n    return this.firestore.collection(this.collectionName).add(denunciaRecord)\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}