{"version":3,"sources":["webpack:///src/app/denuncia/denuncia.page.html","webpack:///src/app/denuncia/denuncia-routing.module.ts","webpack:///src/app/denuncia/denuncia.module.ts","webpack:///src/app/denuncia/denuncia.page.scss","webpack:///src/app/denuncia/denuncia.page.ts","webpack:///src/app/models/denuncia/denuncia.ts","webpack:///src/app/services/denuncia/denuncia.service.ts"],"names":["routes","path","component","denunciaPageRoutingModule","imports","forChild","exports","denunciaPageModule","declarations","denunciaPage","alertController","formBuilder","denunciaService","storageService","geolocation","formDenuncia","group","compose","required","minLength","pattern","recuperaEnderecoStorage","verificaCoordenadas","titulo","mensagem","create","header","message","buttons","alert","present","denuncia","nome","controls","value","email","endereco","data","descricao","insereDenuncia","then","mostraAlerta","error","console","log","recuperaStorage","setValue","getCurrentPosition","resp","coordenadas","JSON","stringify","watch","watchPosition","subscribe","posicoes","push","selector","template","Denuncia","DenunciaService","firestore","collectionName","denunciaRecord","timestamp","Date","collection","add","providedIn"],"mappings":"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","file":"denuncia-denuncia-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-title>\\r\\n      Denúncia\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n  <ion-header collapse=\\\"condense\\\">\\r\\n    <ion-toolbar>\\r\\n      <ion-title size=\\\"large\\\">Denúncia</ion-title>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  <form [formGroup]=\\\"formDenuncia\\\" (ngSubmit)=\\\"cadastraDenuncia()\\\">\\r\\n  <ion-item lines=\\\"full\\\">\\r\\n    <div style=\\\"justify-content: space-between;\\\">\\r\\n      <ion-input placeholder=\\\"Informe seu nome\\\" type=\\\"text\\\" formControlName=\\\"nome\\\"></ion-input>\\r\\n      <div *ngIf=\\\"formDenuncia.controls.nome.errors\\\">\\r\\n        <span *ngIf=\\\"formDenuncia.controls.nome.errors.required\\\"><small>Campo obrigatório</small></span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-item lines=\\\"full\\\">\\r\\n    <div style=\\\"justify-content: space-between;\\\">\\r\\n      <ion-input placeholder=\\\"Informe seu e-mail\\\" type=\\\"text\\\" formControlName=\\\"email\\\"></ion-input>\\r\\n      <div *ngIf=\\\"formDenuncia.controls.email.errors\\\">\\r\\n        <span *ngIf=\\\"formDenuncia.controls.email.errors.required\\\"><small>Campo obrigatório</small></span>\\r\\n        <span *ngIf=\\\"formDenuncia.controls.email.errors.pattern\\\"><small>Formato inválido</small></span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <div style=\\\"justify-content: space-between;\\\">\\r\\n      <ion-input placeholder=\\\"Informe o endereço da ocorrência\\\" type=\\\"text\\\" formControlName=\\\"endereco\\\"></ion-input>\\r\\n      <div *ngIf=\\\"formDenuncia.controls.endereco.errors\\\">\\r\\n        <span *ngIf=\\\"formDenuncia.controls.endereco.errors.required\\\"><small>Campo obrigatório</small></span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <div style=\\\"justify-content: space-between;\\\">\\r\\n      <ion-datetime displayFormat=\\\"DD-MM-YYYY\\\" placeholder=\\\"Informe a data da ocorrência\\\" formControlName=\\\"data\\\"></ion-datetime>\\r\\n      <div *ngIf=\\\"formDenuncia.controls.data.errors\\\">\\r\\n        <span *ngIf=\\\"formDenuncia.controls.data.errors.required\\\"><small>Campo obrigatório</small></span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <div style=\\\"justify-content: space-between;\\\">\\r\\n    <ion-textarea placeholder=\\\"Descreva a denúncia\\\" type=\\\"text\\\" formControlName=\\\"descricao\\\"></ion-textarea>\\r\\n      <div *ngIf=\\\"formDenuncia.controls.descricao.errors\\\">\\r\\n        <span *ngIf=\\\"formDenuncia.controls.descricao.errors.required\\\"><small>Campo obrigatório</small></span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-button expand=\\\"block\\\" type=\\\"submit\\\" [disabled]=\\\"!formDenuncia.valid\\\">Enviar</ion-button>  \\r\\n  <ion-item>\\r\\n    <ion-label>Coordenadas: {{coordendas.latitude}}, {{coordendas.longitude}}</ion-label>\\r\\n  </ion-item>\\r\\n  <ion-button expand=\\\"block\\\" (click)=\\\"recuperaCoordenadas()\\\">Obter Localização</ion-button>\\r\\n</form>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { denunciaPage } from './denuncia.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: denunciaPage,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class denunciaPageRoutingModule {}\r\n","import { IonicModule } from '@ionic/angular';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport {  ReactiveFormsModule } from '@angular/forms';\r\nimport { denunciaPage } from './denuncia.page';\r\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\r\n\r\nimport { denunciaPageRoutingModule } from './denuncia-routing.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    IonicModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    ExploreContainerComponentModule,\r\n    ReactiveFormsModule,\r\n    denunciaPageRoutingModule\r\n  ],\r\n  declarations: [denunciaPage]\r\n})\r\nexport class denunciaPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2RlbnVuY2lhL2RlbnVuY2lhLnBhZ2Uuc2NzcyJ9 */\";","import { Component } from '@angular/core';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { Denuncia } from '../models/denuncia/denuncia';\r\nimport { DenunciaService } from '../services/denuncia/denuncia.service';\r\nimport { StorageService } from '../services/storage/storage.service';\r\nimport { Geolocation, Geoposition } from '@ionic-native/geolocation/ngx';\r\n\r\n@Component({\r\n  selector: 'app-denuncia',\r\n  templateUrl: 'denuncia.page.html',\r\n  styleUrls: ['denuncia.page.scss']\r\n})\r\nexport class denunciaPage {\r\n\r\n  public formDenuncia: FormGroup;\r\n  coordenadas: Geoposition;\r\n  posicoes:Geoposition[];\r\n\r\n  constructor(public alertController: AlertController, \r\n              private formBuilder: FormBuilder, \r\n              private denunciaService: DenunciaService, \r\n              private storageService: StorageService,\r\n              private geolocation: Geolocation) {\r\n    this.formDenuncia = this.formBuilder.group({\r\n      'nome': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'email': [null, Validators.compose([Validators.required,\r\n        Validators.pattern('^[_A-Za-z0-9-\\\\+]+(\\\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\\\.[A-Za-z0-9]+)*(\\\\.[A-Za-z]{2,})$')])],\r\n      'endereco': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'data': [null, Validators.compose([Validators.required])],\r\n      'descricao': [null, Validators.compose([Validators.required, Validators.minLength(3)])]\r\n    });\r\n    this.recuperaEnderecoStorage();\r\n    this.verificaCoordenadas();\r\n  };\r\n  async mostraAlerta(titulo: string, mensagem: string) {\r\n    const alert = await this.alertController.create({\r\n      header: titulo,\r\n      message: mensagem,\r\n      buttons: ['OK']\r\n    });\r\n\r\n    await alert.present();\r\n  };\r\n  async cadastraDenuncia(){\r\n    let denuncia = new Denuncia();\r\n    denuncia.nome = this.formDenuncia.controls[\"nome\"].value;\r\n    denuncia.email = this.formDenuncia.controls[\"email\"].value;\r\n    denuncia.endereco = this.formDenuncia.controls[\"endereco\"].value;\r\n    denuncia.data = this.formDenuncia.controls[\"data\"].value;\r\n    denuncia.descricao = this.formDenuncia.controls[\"descricao\"].value;\r\n\r\n    this.denunciaService.insereDenuncia(denuncia).then(()=>{\r\n      this.mostraAlerta(\"Sucesso\", \"Cadastro efetuado!\");\r\n    }).catch((error)=>{\r\n      console.log(error);\r\n    })\r\n  };\r\n\r\n  async recuperaEnderecoStorage(){\r\n    const endereco = await this.storageService.recuperaStorage(\"endereco\");\r\n    this.formDenuncia.controls[\"endereco\"].setValue(endereco);\r\n    console.log(\"Endereço: \" +endereco );\r\n  };\r\n\r\n  async recuperaCoordenadas(){\r\n    this.geolocation.getCurrentPosition().then((resp) => {\r\n      this.coordenadas = resp;\r\n      console.log(JSON.stringify(resp));\r\n    }).catch((error) => {\r\n      this.mostraAlerta('Erro ao obter as coordenadas!', error);\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  async verificaCoordenadas(){\r\n  let watch = this.geolocation.watchPosition();\r\n    watch.subscribe((data) => {\r\n    this.posicoes.push(data);\r\n    console.log(data);\r\n    });\r\n  }\r\n}\r\n","export class Denuncia {\r\n    nome:string;\r\n    email:string;\r\n    endereco:string;\r\n    data:string;\r\n    descricao:string;\r\n}","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { Denuncia } from 'src/app/models/denuncia/denuncia';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DenunciaService {\r\n\r\n  constructor(private firestore: AngularFirestore) { }\r\n\r\n  collectionName = 'denuncias';\r\n\r\n  insereDenuncia(denuncia: Denuncia){\r\n    let denunciaRecord = {\r\n      nome : denuncia.nome,\r\n      email : denuncia.email,\r\n      endereco : denuncia.endereco,\r\n      data : denuncia.data,\r\n      descricao : denuncia.descricao,\r\n      timestamp: new Date()\r\n    }\r\n    return this.firestore.collection(this.collectionName).add(denunciaRecord)\r\n  }\r\n}\r\n"]}