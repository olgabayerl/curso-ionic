{"version":3,"sources":["webpack:///src/app/denuncia/denuncia.page.html","webpack:///src/app/denuncia/denuncia-routing.module.ts","webpack:///src/app/denuncia/denuncia.module.ts","webpack:///src/app/denuncia/denuncia.page.scss","webpack:///src/app/denuncia/denuncia.page.ts","webpack:///src/app/models/denuncia/denuncia.ts","webpack:///src/app/services/denuncia/denuncia.service.ts"],"names":["routes","path","component","denunciaPageRoutingModule","imports","forChild","exports","denunciaPageModule","declarations","denunciaPage","alertController","formBuilder","denunciaService","storageService","geolocation","nativeGeocoder","formDenuncia","group","compose","required","minLength","pattern","recuperaEnderecoStorage","titulo","mensagem","create","header","message","buttons","alert","present","denuncia","nome","controls","value","email","endereco","data","descricao","insereDenuncia","then","mostraAlerta","error","console","log","recuperaStorage","setValue","getCurrentPosition","enableHighAccuracy","timeout","maximumAge","resp","latitude","coords","longitude","JSON","stringify","position","converteCoordenadas","options","useLocale","maxResults","reverseGeocode","result","selector","template","Denuncia","DenunciaService","firestore","collectionName","denunciaRecord","timestamp","Date","collection","add","providedIn"],"mappings":"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","file":"denuncia-denuncia-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      Denúncia\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Denúncia</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  <form [formGroup]=\\\"formDenuncia\\\" (ngSubmit)=\\\"cadastraDenuncia()\\\">\\n  <ion-item lines=\\\"full\\\">\\n    <div style=\\\"justify-content: space-between;\\\">\\n      <ion-input placeholder=\\\"Informe seu nome\\\" type=\\\"text\\\" formControlName=\\\"nome\\\"></ion-input>\\n      <div *ngIf=\\\"formDenuncia.controls.nome.errors\\\">\\n        <span *ngIf=\\\"formDenuncia.controls.nome.errors.required\\\"><small>Campo obrigatório</small></span>\\n      </div>\\n    </div>\\n  </ion-item>\\n  <ion-item lines=\\\"full\\\">\\n    <div style=\\\"justify-content: space-between;\\\">\\n      <ion-input placeholder=\\\"Informe seu e-mail\\\" type=\\\"text\\\" formControlName=\\\"email\\\"></ion-input>\\n      <div *ngIf=\\\"formDenuncia.controls.email.errors\\\">\\n        <span *ngIf=\\\"formDenuncia.controls.email.errors.required\\\"><small>Campo obrigatório</small></span>\\n        <span *ngIf=\\\"formDenuncia.controls.email.errors.pattern\\\"><small>Formato inválido</small></span>\\n      </div>\\n    </div>\\n  </ion-item>\\n  <ion-item>\\n    <div style=\\\"justify-content: space-between;\\\">\\n      <ion-input placeholder=\\\"Informe o endereço da ocorrência\\\" type=\\\"text\\\" formControlName=\\\"endereco\\\"></ion-input>\\n      <div *ngIf=\\\"formDenuncia.controls.endereco.errors\\\">\\n        <span *ngIf=\\\"formDenuncia.controls.endereco.errors.required\\\"><small>Campo obrigatório</small></span>\\n      </div>\\n    </div>\\n  </ion-item>\\n  <ion-item>\\n    <div style=\\\"justify-content: space-between;\\\">\\n      <ion-datetime displayFormat=\\\"DD-MM-YYYY\\\" placeholder=\\\"Informe a data da ocorrência\\\" formControlName=\\\"data\\\"></ion-datetime>\\n      <div *ngIf=\\\"formDenuncia.controls.data.errors\\\">\\n        <span *ngIf=\\\"formDenuncia.controls.data.errors.required\\\"><small>Campo obrigatório</small></span>\\n      </div>\\n    </div>\\n  </ion-item>\\n  <ion-item>\\n    <div style=\\\"justify-content: space-between;\\\">\\n    <ion-textarea placeholder=\\\"Descreva a denúncia\\\" type=\\\"text\\\" formControlName=\\\"descricao\\\"></ion-textarea>\\n      <div *ngIf=\\\"formDenuncia.controls.descricao.errors\\\">\\n        <span *ngIf=\\\"formDenuncia.controls.descricao.errors.required\\\"><small>Campo obrigatório</small></span>\\n      </div>\\n    </div>\\n  </ion-item>\\n  <ion-button expand=\\\"block\\\" type=\\\"submit\\\" [disabled]=\\\"!formDenuncia.valid\\\">Enviar</ion-button>  \\n  <ion-item>\\n    <ion-label>Coordenadas: {{latitude}}, {{longitude}}</ion-label>\\n  </ion-item>\\n  <ion-item>\\n    <ion-label>Endereço: {{endereco}}</ion-label>\\n  </ion-item>\\n  <ion-button expand=\\\"block\\\" (click)=\\\"recuperaCoordenadas()\\\">Obter Localização</ion-button>\\n</form>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { denunciaPage } from './denuncia.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: denunciaPage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class denunciaPageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport {  ReactiveFormsModule } from '@angular/forms';\nimport { denunciaPage } from './denuncia.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { denunciaPageRoutingModule } from './denuncia-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    ReactiveFormsModule,\n    denunciaPageRoutingModule\n  ],\n  declarations: [denunciaPage]\n})\nexport class denunciaPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2RlbnVuY2lhL2RlbnVuY2lhLnBhZ2Uuc2NzcyJ9 */\";","import { Component,OnInit  } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Denuncia } from '../models/denuncia/denuncia';\nimport { DenunciaService } from '../services/denuncia/denuncia.service';\nimport { StorageService } from '../services/storage/storage.service';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { NativeGeocoder, NativeGeocoderResult, NativeGeocoderOptions } from '@ionic-native/native-geocoder/ngx';\n\n\n@Component({\n  selector: 'app-denuncia',\n  templateUrl: 'denuncia.page.html',\n  styleUrls: ['denuncia.page.scss']\n})\nexport class denunciaPage {\n\n  public formDenuncia: FormGroup;\n  latitude:any;\n  longitude:any;\n  endereco:String;\n\n\n  constructor(public alertController: AlertController, \n              private formBuilder: FormBuilder, \n              private denunciaService: DenunciaService, \n              private storageService: StorageService,\n              private geolocation: Geolocation,\n              private nativeGeocoder: NativeGeocoder) {\n    this.formDenuncia = this.formBuilder.group({\n      'nome': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\n      'email': [null, Validators.compose([Validators.required,\n        Validators.pattern('^[_A-Za-z0-9-\\\\+]+(\\\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\\\.[A-Za-z0-9]+)*(\\\\.[A-Za-z]{2,})$')])],\n      'endereco': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\n      'data': [null, Validators.compose([Validators.required])],\n      'descricao': [null, Validators.compose([Validators.required, Validators.minLength(3)])]\n    });\n    this.recuperaEnderecoStorage();\n  };\n\n  async mostraAlerta(titulo: string, mensagem: string) {\n    const alert = await this.alertController.create({\n      header: titulo,\n      message: mensagem,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  };\n  async cadastraDenuncia(){\n    let denuncia = new Denuncia();\n    denuncia.nome = this.formDenuncia.controls[\"nome\"].value;\n    denuncia.email = this.formDenuncia.controls[\"email\"].value;\n    denuncia.endereco = this.formDenuncia.controls[\"endereco\"].value;\n    denuncia.data = this.formDenuncia.controls[\"data\"].value;\n    denuncia.descricao = this.formDenuncia.controls[\"descricao\"].value;\n\n    this.denunciaService.insereDenuncia(denuncia).then(()=>{\n      this.mostraAlerta(\"Sucesso\", \"Cadastro efetuado!\");\n    }).catch((error)=>{\n      console.log(error);\n    })\n  };\n\n  async recuperaEnderecoStorage(){\n    const endereco = await this.storageService.recuperaStorage(\"endereco\");\n    this.formDenuncia.controls[\"endereco\"].setValue(endereco);\n    console.log(\"Endereço: \" +endereco );\n  };\n\n  async recuperaCoordenadas(){\n   \n    const position = await this.geolocation.getCurrentPosition({enableHighAccuracy: true, timeout: 5000, maximumAge: 0}).then((resp) => {\n        this.latitude = resp.coords.latitude;\n        this.longitude = resp.coords.longitude; \n        console.log(JSON.stringify(resp));\n      }).catch((error) => {\n        this.mostraAlerta('Erro ao obter as coordenadas!', error);\n        console.log('Erro ao obter as coordenadas!' + error);\n    });\n    await this.converteCoordenadas();\n  }\n\n  async converteCoordenadas(){\n    let options: NativeGeocoderOptions = {\n      useLocale: true,\n      maxResults: 5\n  };\n  \n  this.nativeGeocoder.reverseGeocode(this.latitude, this.longitude, options)\n    .then((result: NativeGeocoderResult[]) => {\n      this.endereco = JSON.stringify(result[0]);\n      console.log(this.endereco);\n    })\n    .catch((error: any) => console.log(error));\n  }\n\n}\n","export class Denuncia {\n    nome:string;\n    email:string;\n    endereco:string;\n    data:string;\n    descricao:string;\n}","import { Injectable } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { Denuncia } from 'src/app/models/denuncia/denuncia';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DenunciaService {\n\n  constructor(private firestore: AngularFirestore) { }\n\n  collectionName = 'denuncias';\n\n  insereDenuncia(denuncia: Denuncia){\n    let denunciaRecord = {\n      nome : denuncia.nome,\n      email : denuncia.email,\n      endereco : denuncia.endereco,\n      data : denuncia.data,\n      descricao : denuncia.descricao,\n      timestamp: new Date()\n    }\n    return this.firestore.collection(this.collectionName).add(denunciaRecord)\n  }\n}\n"]}