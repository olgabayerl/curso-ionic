{"version":3,"sources":["./src/app/denuncia/denuncia.page.html","./src/app/denuncia/denuncia-routing.module.ts","./src/app/denuncia/denuncia.module.ts","./src/app/denuncia/denuncia.page.scss","./src/app/denuncia/denuncia.page.ts","./src/app/models/denuncia/denuncia.ts","./src/app/services/denuncia/denuncia.service.ts"],"names":[],"mappings":"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","file":"denuncia-denuncia-module-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      Denúncia\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Denúncia</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  <form [formGroup]=\\\"formDenuncia\\\" (ngSubmit)=\\\"cadastraDenuncia()\\\">\\n  <ion-item lines=\\\"full\\\">\\n    <div style=\\\"justify-content: space-between;\\\">\\n      <ion-input placeholder=\\\"Informe seu nome\\\" type=\\\"text\\\" formControlName=\\\"nome\\\"></ion-input>\\n      <div *ngIf=\\\"formDenuncia.controls.nome.errors\\\">\\n        <span *ngIf=\\\"formDenuncia.controls.nome.errors.required\\\"><small>Campo obrigatório</small></span>\\n      </div>\\n    </div>\\n  </ion-item>\\n  <ion-item lines=\\\"full\\\">\\n    <div style=\\\"justify-content: space-between;\\\">\\n      <ion-input placeholder=\\\"Informe seu e-mail\\\" type=\\\"text\\\" formControlName=\\\"email\\\"></ion-input>\\n      <div *ngIf=\\\"formDenuncia.controls.email.errors\\\">\\n        <span *ngIf=\\\"formDenuncia.controls.email.errors.required\\\"><small>Campo obrigatório</small></span>\\n        <span *ngIf=\\\"formDenuncia.controls.email.errors.pattern\\\"><small>Formato inválido</small></span>\\n      </div>\\n    </div>\\n  </ion-item>\\n  <ion-item>\\n    <div style=\\\"justify-content: space-between;\\\">\\n      <ion-input placeholder=\\\"Informe o endereço da ocorrência\\\" type=\\\"text\\\" formControlName=\\\"endereco\\\"></ion-input>\\n      <div *ngIf=\\\"formDenuncia.controls.endereco.errors\\\">\\n        <span *ngIf=\\\"formDenuncia.controls.endereco.errors.required\\\"><small>Campo obrigatório</small></span>\\n      </div>\\n    </div>\\n  </ion-item>\\n  <ion-item>\\n    <div style=\\\"justify-content: space-between;\\\">\\n      <ion-datetime displayFormat=\\\"DD-MM-YYYY\\\" placeholder=\\\"Informe a data da ocorrência\\\" formControlName=\\\"data\\\"></ion-datetime>\\n      <div *ngIf=\\\"formDenuncia.controls.data.errors\\\">\\n        <span *ngIf=\\\"formDenuncia.controls.data.errors.required\\\"><small>Campo obrigatório</small></span>\\n      </div>\\n    </div>\\n  </ion-item>\\n  <ion-item>\\n    <div style=\\\"justify-content: space-between;\\\">\\n    <ion-textarea placeholder=\\\"Descreva a denúncia\\\" type=\\\"text\\\" formControlName=\\\"descricao\\\"></ion-textarea>\\n      <div *ngIf=\\\"formDenuncia.controls.descricao.errors\\\">\\n        <span *ngIf=\\\"formDenuncia.controls.descricao.errors.required\\\"><small>Campo obrigatório</small></span>\\n      </div>\\n    </div>\\n  </ion-item>\\n  <ion-button expand=\\\"block\\\" type=\\\"submit\\\" [disabled]=\\\"!formDenuncia.valid\\\">Enviar</ion-button>  \\n  <ion-item>\\n    <ion-label>Coordenadas: {{latitude}}, {{longitude}}</ion-label>\\n  </ion-item>\\n  <ion-item>\\n    <ion-label>Endereço: {{endereco}}</ion-label>\\n  </ion-item>\\n  <ion-button expand=\\\"block\\\" (click)=\\\"recuperaCoordenadas()\\\">Obter Localização</ion-button>\\n</form>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { denunciaPage } from './denuncia.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: denunciaPage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class denunciaPageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport {  ReactiveFormsModule } from '@angular/forms';\nimport { denunciaPage } from './denuncia.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { denunciaPageRoutingModule } from './denuncia-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    ReactiveFormsModule,\n    denunciaPageRoutingModule\n  ],\n  declarations: [denunciaPage]\n})\nexport class denunciaPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2RlbnVuY2lhL2RlbnVuY2lhLnBhZ2Uuc2NzcyJ9 */\";","import { Component,OnInit  } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Denuncia } from '../models/denuncia/denuncia';\nimport { DenunciaService } from '../services/denuncia/denuncia.service';\nimport { StorageService } from '../services/storage/storage.service';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { NativeGeocoder, NativeGeocoderResult, NativeGeocoderOptions } from '@ionic-native/native-geocoder/ngx';\n\n\n@Component({\n  selector: 'app-denuncia',\n  templateUrl: 'denuncia.page.html',\n  styleUrls: ['denuncia.page.scss']\n})\nexport class denunciaPage {\n\n  public formDenuncia: FormGroup;\n  latitude:any;\n  longitude:any;\n  endereco:String;\n\n\n  constructor(public alertController: AlertController, \n              private formBuilder: FormBuilder, \n              private denunciaService: DenunciaService, \n              private storageService: StorageService,\n              private geolocation: Geolocation,\n              private nativeGeocoder: NativeGeocoder) {\n    this.formDenuncia = this.formBuilder.group({\n      'nome': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\n      'email': [null, Validators.compose([Validators.required,\n        Validators.pattern('^[_A-Za-z0-9-\\\\+]+(\\\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\\\.[A-Za-z0-9]+)*(\\\\.[A-Za-z]{2,})$')])],\n      'endereco': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\n      'data': [null, Validators.compose([Validators.required])],\n      'descricao': [null, Validators.compose([Validators.required, Validators.minLength(3)])]\n    });\n    this.recuperaEnderecoStorage();\n  };\n\n  async mostraAlerta(titulo: string, mensagem: string) {\n    const alert = await this.alertController.create({\n      header: titulo,\n      message: mensagem,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  };\n  async cadastraDenuncia(){\n    let denuncia = new Denuncia();\n    denuncia.nome = this.formDenuncia.controls[\"nome\"].value;\n    denuncia.email = this.formDenuncia.controls[\"email\"].value;\n    denuncia.endereco = this.formDenuncia.controls[\"endereco\"].value;\n    denuncia.data = this.formDenuncia.controls[\"data\"].value;\n    denuncia.descricao = this.formDenuncia.controls[\"descricao\"].value;\n\n    this.denunciaService.insereDenuncia(denuncia).then(()=>{\n      this.mostraAlerta(\"Sucesso\", \"Cadastro efetuado!\");\n    }).catch((error)=>{\n      console.log(error);\n    })\n  };\n\n  async recuperaEnderecoStorage(){\n    const endereco = await this.storageService.recuperaStorage(\"endereco\");\n    this.formDenuncia.controls[\"endereco\"].setValue(endereco);\n    console.log(\"Endereço: \" +endereco );\n  };\n\n  async recuperaCoordenadas(){\n   \n    const position = await this.geolocation.getCurrentPosition({enableHighAccuracy: true, timeout: 5000, maximumAge: 0}).then((resp) => {\n        this.latitude = resp.coords.latitude;\n        this.longitude = resp.coords.longitude; \n        console.log(JSON.stringify(resp));\n      }).catch((error) => {\n        this.mostraAlerta('Erro ao obter as coordenadas!', error);\n        console.log('Erro ao obter as coordenadas!' + error);\n    });\n    await this.converteCoordenadas();\n  }\n\n  async converteCoordenadas(){\n    let options: NativeGeocoderOptions = {\n      useLocale: true,\n      maxResults: 5\n  };\n  \n  this.nativeGeocoder.reverseGeocode(this.latitude, this.longitude, options)\n    .then((result: NativeGeocoderResult[]) => {\n      this.endereco = JSON.stringify(result[0]);\n      console.log(this.endereco);\n    })\n    .catch((error: any) => console.log(error));\n  }\n\n}\n","export class Denuncia {\n    nome:string;\n    email:string;\n    endereco:string;\n    data:string;\n    descricao:string;\n}","import { Injectable } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { Denuncia } from 'src/app/models/denuncia/denuncia';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DenunciaService {\n\n  constructor(private firestore: AngularFirestore) { }\n\n  collectionName = 'denuncias';\n\n  insereDenuncia(denuncia: Denuncia){\n    let denunciaRecord = {\n      nome : denuncia.nome,\n      email : denuncia.email,\n      endereco : denuncia.endereco,\n      data : denuncia.data,\n      descricao : denuncia.descricao,\n      timestamp: new Date()\n    }\n    return this.firestore.collection(this.collectionName).add(denunciaRecord)\n  }\n}\n"],"sourceRoot":"webpack:///"}